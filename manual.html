<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <title>Vitry manual</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="pandoc" />
    <meta name="author" content="© Hans Höglund 2010" />
    <meta name="date" content="" />


    <link rel="stylesheet" href="styles.css" type="text/css" />
    <script src="jquery.js" type="text/javascript"></script>
    <script src="manual.js" type="text/javascript"></script>
  </head>
  
  <body>
   
    <div id="top-menu">
      <table>
        <tbody>
          <tr class="odd">
            <td align="left">
              <a href="http://github.com/hanshoglund/Vitry">Vitry on Github</a>
        	  </td>
            <td align="left">
              <a id="toc-toggle" href="javascript:toggle()">Table of contents</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div><!-- top-menu -->


    <div id="TOC"
    ><ul
      ><li
        ><a href="#preface"
          >Preface</a
          ></li
        ><li
        ><a href="#getting-started"
          >1. Getting started</a
          ><ul
          ><li
    	><a href="#compiled-distributions"
    	  >Compiled distributions</a
    	  ></li
    	><li
    	><a href="#source-distributions"
    	  >Source distributions</a
    	  ></li
    	><li
    	><a href="#using-the-interpreter"
    	  >Using the interpreter</a
    	  ></li
    	></ul
          ></li
        ><li
        ><a href="#the-language"
          >2. The language</a
          ><ul
          ><li
    	><a href="#comments-and-whitespace"
    	  >Comments and whitespace</a
    	  ></li
    	><li
    	><a href="#values-and-expressions"
    	  >Values and expressions</a
    	  ><ul
    	  ><li
    	    ><a href="#literals"
    	      >Literals</a
    	      ></li
    	    ><li
    	    ><a href="#infix-expressions"
    	      >Infix expressions</a
    	      ></li
    	    ></ul
    	  ></li
    	><li
    	><a href="#types"
    	  >Types</a
    	  ><ul
    	  ><li
    	    ><a href="#booleans"
    	      >Booleans</a
    	      ></li
    	    ><li
    	    ><a href="#numbers"
    	      >Numbers</a
    	      ></li
    	    ><li
    	    ><a href="#strings"
    	      >Strings</a
    	      ></li
    	    ><li
    	    ><a href="#atoms"
    	      >Atoms</a
    	      ></li
    	    ><li
    	    ><a href="#or-types"
    	      >Or types</a
    	      ></li
    	    ><li
    	    ><a href="#and-types"
    	      >And types</a
    	      ></li
    	    ></ul
    	  ></li
    	><li
    	><a href="#bindings-and-let"
    	  >Bindings and let</a
    	  ></li
    	><li
    	><a href="#functions"
    	  >Functions</a
    	  ></li
    	><li
    	><a href="#loop-and-recur"
    	  >Loop and recur</a
    	  ></li
    	><li
    	><a href="#sequences"
    	  >Sequences</a
    	  ></li
    	><li
    	><a href="#effects-and-do"
    	  >Effects and do</a
    	  ></li
    	><li
    	><a href="#modules"
    	  >Modules</a
    	  ></li
    	><li
    	><a href="#implicitness"
    	  >Implicitness</a
    	  ></li
    	></ul
          ></li
        ><li
        ><a href="#representing-music"
          >3. Representing music</a
          ><ul
          ><li
    	><a href="#music-and-notations"
    	  >Music and notations</a
    	  ></li
    	><li
    	><a href="#time"
    	  >Time</a
    	  ></li
    	><li
    	><a href="#event"
    	  >Event</a
    	  ></li
    	><li
    	><a href="#pitch"
    	  >Pitch</a
    	  ></li
    	><li
    	><a href="#instrumentation"
    	  >Instrumentation</a
    	  ></li
    	><li
    	><a href="#sudden-change"
    	  >Sudden change</a
    	  ></li
    	><li
    	><a href="#continous-change"
    	  >Continous change</a
    	  ></li
    	><li
    	><a href="#spacialization"
    	  >Spacialization</a
    	  ></li
    	><li
    	><a href="#nonlinear-structures"
    	  >Nonlinear structures</a
    	  ></li
    	><li
    	><a href="#indeterminate-structures"
    	  >Indeterminate structures</a
    	  ></li
    	></ul
          ></li
        ><li
        ><a href="#transcribing-and-performing"
          >4. Transcribing and performing</a
          ><ul
          ><li
    	><a href="#the-sibelius-transcriber"
    	  >The Sibelius transcriber</a
    	  ></li
    	><li
    	><a href="#the-lilypond-transcriber"
    	  >The LilyPond transcriber</a
    	  ></li
    	><li
    	><a href="#the-musicxml-transcriber"
    	  >The MusicXML transcriber</a
    	  ></li
    	><li
    	><a href="#the-midi-transcriber"
    	  >The MIDI transcriber</a
    	  ></li
    	><li
    	><a href="#creating-transcribers"
    	  >Creating transcribers</a
    	  ></li
    	><li
    	><a href="#creating-performers"
    	  >Creating performers</a
    	  ></li
    	></ul
          ></li
        ><li
        ><a href="#advanced-usage"
          >5. Advanced usage</a
          ><ul
          ><li
    	><a href="#laziness"
    	  >Laziness</a
    	  ></li
    	><li
    	><a href="#calling-foreign-languages"
    	  >Calling foreign languages</a
    	  ></li
    	><li
    	><a href="#setting-up-the-environment"
    	  >Setting up the environment</a
    	  ></li
    	><li
    	><a href="#replacing-the-syntax"
    	  >Replacing the syntax</a
    	  ></li
    	><li
    	><a href="#real-time"
    	  >Real-time</a
    	  ></li
    	><li
    	><a href="#networking"
    	  >Networking</a
    	  ></li
    	></ul
          ></li
        ><li
        ><a href="#reference"
          >6. Reference</a
          ><ul
          ><li
    	><a href="#dictionary"
    	  >Dictionary</a
    	  ></li
    	></ul
          ></li
        ></ul
      ></div
    >
    <!-- TOC -->


    <div id="content">  
      <h1 class="title">Vitry manual</h1>

      <p>© Hans Höglund 2010</p>
  

<!-- Indent 0 for <pre> -->
<h2 id="preface"
><a href="#TOC"
  >Preface</a
  ></h2
><p
>Vitry is a functional programming language and an environment for representation and manipulation of music. The language has infix syntax and simple, expressive type system. The representation of music is abstract in the sense that it is not concerned with actual sound, but the formal structure of music. These representations can be transcribed to standard musical notation or used as control data for sound synthesis.</p
><p
>Vitry may be used for composition, arranging, transcription or analysis. It is built for easy integration with other environments, particularly the following:</p
><ul
><li
  >Lilypond</li
  ><li
  >Sibelius</li
  ><li
  >SuperCollider</li
  ></ul
><h2 id="getting-started"
><a href="#TOC"
  >1. Getting started</a
  ></h2
><p
>Vitry targets the <a href="http://en.wikipedia.org/wiki/Java_Virtual_Machine"
  >Java Virtual Machine</a
  >, and may be used with almost any operating system. The only dependency is the Java runtime environment. To check if this is installed, open a shell and type:</p
><pre
><code
  >$ java -version
</code
  ></pre
><p
>If not, download a suitable implemementation. There are <a href="http://en.wikipedia.org/wiki/List_of_Java_virtual_machines"
  >many alternatives</a
  >.</p
><h3 id="compiled-distributions"
><a href="#TOC"
  >Compiled distributions</a
  ></h3
><p
>Compiled distributions may be downloaded from the GitHub site: <a href="http://github.com/hanshoglund/vitry/downloads"
  >http://github.com/hanshoglund/vitry/downloads</a
  >. If a version for your operating system is not available, download and compile a source distribution.</p
><h3 id="source-distributions"
><a href="#TOC"
  >Source distributions</a
  ></h3
><p
>The build requirements are <a href="http://git-scm.com/"
  >Git</a
  > and <a href="http://ant.apache.org/"
  >Apache Ant</a
  >. You may check if these are installed as follows:</p
><pre
><code
  >$ git
$ ant
</code
  ></pre
><p
>If not, download and install from the sites above or through your package management system.</p
><p
>As soon as the build requirements are in place, do:</p
><pre
><code
  >$ git clone git@github.com:hanshoglund/vitry.git
$ cd vitry
$ ant
$ sudo ant install [dir]
</code
  ></pre
><p
>Substitute any directory you want for <code
  >[dir]</code
  >. The default is <code
  >/usr/bin</code
  >.</p
><h3 id="using-the-interpreter"
><a href="#TOC"
  >Using the interpreter</a
  ></h3
><p
>The interpreter is typically the simplest way to interact with Vitry. To run it, simply type:</p
><pre
><code
  >$ vitry
</code
  ></pre
><p
>Vitry will print some setup information and enter a read-eval-print mode. In this mode, you may enter an expression followed by enter, and it will be evaluated and printed to you.</p
><h2 id="the-language"
><a href="#TOC"
  >2. The language</a
  ></h2
><p
>Vitry is similiar to other functional programming languages. This chapter will give a brief overview of the concepts used in Vitry<sup
  ><a href="#fn1" class="footnoteRef" id="fnref1"
    >1</a
    ></sup
  >.</p
><h3 id="comments-and-whitespace"
><a href="#TOC"
  >Comments and whitespace</a
  ></h3
><p
>As in most languages, Vitry programs consists of tokens, which are sequences of characters separated by whitespace. The characters recognized by Vitry as whitespace are <code
  >&#246;</code
  >, <code
  >\n</code
  > och <code
  >\r</code
  >. For example, the following snippet of code contain ten tokens:</p
><pre
><code
  >print music 
 ++ &quot; &quot; ++ of 
 ++ &quot; &quot; ++ spaces
</code
  ></pre
><h3 id="values-and-expressions"
><a href="#TOC"
  >Values and expressions</a
  ></h3
><p
>A functional language is first and foremost concerened with manipulating values. Values are pieces of data that represent something. In Vitry, all values are unique and non-changing. This means that equal values always refer to the same underlying representations in memory. This is also true for compound structures, such as lists.</p
><p
>Expressions are series of tokens each of which may produce a value. They may be nested using parentheses. Thus any program could be thought of as a single expression. Below are some examples of expressions along with their result<sup
  ><a href="#fn2" class="footnoteRef" id="fnref2"
    >2</a
    ></sup
  >.</p
><pre
><code
  >1            =&gt; 1
2 + 3        =&gt; 5
(2 + 3) * 2  =&gt; 10
not true     =&gt; false
sin (pi/2)   =&gt; 1
</code
  ></pre
><p
>The most common forms of expressions are outlined below. Other so-called special forms are used to produce values such as functions and loop structures: these will be described later.</p
><h4 id="literals"
><a href="#TOC"
  >Literals</a
  ></h4
><p
>The simplest form of expression, used to create simple values like numbers and strings. They various types of literals will be convered in the next section.</p
><p
>Examples are: <code
  >1</code
  >, <code
  >-8</code
  >, <code
  >&quot;Hello&quot;</code
  ></p
><h4 id="infix-expressions"
><a href="#TOC"
  >Infix expressions</a
  ></h4
><p
>Consists of literals, along with operators. Operators are</p
><h3 id="types"
><a href="#TOC"
  >Types</a
  ></h3
><p
>Types are used to group and reason about values in a logical way. This help us think about the values we are manipulating and prevent us from doing mistakes. A type may be thought of as a common property of some values. Any value may be tested to see if it conforms to this property, if it does it is said to have the given type.</p
><h4 id="booleans"
><a href="#TOC"
  >Booleans</a
  ></h4
><p
>The boolean type is written as <code
  >bool</code
  >. Its values are written as <code
  >true</code
  > and <code
  >false</code
  >.</p
><h4 id="numbers"
><a href="#TOC"
  >Numbers</a
  ></h4
><p
>Vitry supports bignum natural, integer and rational numbers, as well as floating-point real and complex numbers. The types of these are written as <code
  >nat</code
  >, <code
  >int</code
  >, <code
  >rat</code
  >, <code
  >float</code
  > and <code
  >complex</code
  > respectively.</p
><p
>Natural, integers and rational numbers are written as sequences of digits. Vitry will automatically convert integers to rationals and vice versa:</p
><p
><code
  >152</code
  >, <code
  >42</code
  >, <code
  >-8</code
  >, <code
  >3/2</code
  ></p
><p
>Floating point numbers may be written in several ways:</p
><p
><code
  >0.1</code
  >, <code
  >0.12e10</code
  >, <code
  >2e-5</code
  >, <code
  >0.5/2</code
  ></p
><p
>We create a complex number by adding the suffix <code
  >i</code
  > to the imaginary part:</p
><p
><code
  >2i</code
  >, <code
  >10 + 1i</code
  >, <code
  >22.4 + 32e4i</code
  ></p
><p
>Note that to get one imaginary unit you have to write <code
  >1i</code
  >, as <code
  >i</code
  > is not a number literal. Complex numbers in polar form may be entered using the <code
  >cis</code
  > function:</p
><p
><code
  >22 * cis 4</code
  ></p
><h4 id="strings"
><a href="#TOC"
  >Strings</a
  ></h4
><p
>Strings are sequences of Unicode characters. The string type is written as <code
  >string</code
  >. String values are written inside double-quotes:</p
><p
><code
  >&quot;I hate music&quot;</code
  >, <code
  >&quot;But I love to sing&quot;</code
  ></p
><h4 id="atoms"
><a href="#TOC"
  >Atoms</a
  ></h4
><p
>TODO</p
><h4 id="or-types"
><a href="#TOC"
  >Or types</a
  ></h4
><p
>TODO</p
><p
>Intersection types capture the notion of <em
  >inheritance</em
  > in object-oriented languages.</p
><h4 id="and-types"
><a href="#TOC"
  >And types</a
  ></h4
><p
>TODO</p
><p
>Intersection types capture the notion of <em
  >composition</em
  > in object-oriented languages.</p
><h3 id="bindings-and-let"
><a href="#TOC"
  >Bindings and let</a
  ></h3
><p
>TODO</p
><h3 id="functions"
><a href="#TOC"
  >Functions</a
  ></h3
><p
>TODO</p
><h3 id="loop-and-recur"
><a href="#TOC"
  >Loop and recur</a
  ></h3
><p
>TODO</p
><h3 id="sequences"
><a href="#TOC"
  >Sequences</a
  ></h3
><p
>TODO</p
><h3 id="effects-and-do"
><a href="#TOC"
  >Effects and do</a
  ></h3
><p
>TODO</p
><h3 id="modules"
><a href="#TOC"
  >Modules</a
  ></h3
><p
>TODO</p
><h3 id="implicitness"
><a href="#TOC"
  >Implicitness</a
  ></h3
><p
>TODO</p
><h2 id="representing-music"
><a href="#TOC"
  >3. Representing music</a
  ></h2
><p
>Vitry defines a musical model through a set of types and functions. All musical structures are defined in the language itself. This gives the user of the power to define custom data structures that operate on the same level of abstraction as those provided with the language. The core musical model is agnostic to musical style or writing system, instead it simply represent music as a set of events.</p
><p
>clear distinction between the concepts of <em
  >music</em
  > and <em
  >notation</em
  >, much like the separation of content and presentation commonly used in text processing. By using such a separation, music can be defined and manipulated as a kind of algebraic structure, apart from notational conventions. Another benefit of this strategy is that the same music could easily be translated to any kind representation.</p
><p
>The process of converting a musical value to a notation is called <em
  >transcription</em
  >, while the reverse operation is called <em
  >interpretation</em
  >. These operations will be explained more fully in the next chapter.</p
><h3 id="music-and-notations"
><a href="#TOC"
  >Music and notations</a
  ></h3
><h3 id="time"
><a href="#TOC"
  >Time</a
  ></h3
><h3 id="event"
><a href="#TOC"
  >Event</a
  ></h3
><h3 id="pitch"
><a href="#TOC"
  >Pitch</a
  ></h3
><h3 id="instrumentation"
><a href="#TOC"
  >Instrumentation</a
  ></h3
><h3 id="sudden-change"
><a href="#TOC"
  >Sudden change</a
  ></h3
><h3 id="continous-change"
><a href="#TOC"
  >Continous change</a
  ></h3
><h3 id="spacialization"
><a href="#TOC"
  >Spacialization</a
  ></h3
><h3 id="nonlinear-structures"
><a href="#TOC"
  >Nonlinear structures</a
  ></h3
><h3 id="indeterminate-structures"
><a href="#TOC"
  >Indeterminate structures</a
  ></h3
><h2 id="transcribing-and-performing"
><a href="#TOC"
  >4. Transcribing and performing</a
  ></h2
><h3 id="the-sibelius-transcriber"
><a href="#TOC"
  >The Sibelius transcriber</a
  ></h3
><h3 id="the-lilypond-transcriber"
><a href="#TOC"
  >The LilyPond transcriber</a
  ></h3
><h3 id="the-musicxml-transcriber"
><a href="#TOC"
  >The MusicXML transcriber</a
  ></h3
><h3 id="the-midi-transcriber"
><a href="#TOC"
  >The MIDI transcriber</a
  ></h3
><h3 id="creating-transcribers"
><a href="#TOC"
  >Creating transcribers</a
  ></h3
><h3 id="creating-performers"
><a href="#TOC"
  >Creating performers</a
  ></h3
><h2 id="advanced-usage"
><a href="#TOC"
  >5. Advanced usage</a
  ></h2
><h3 id="laziness"
><a href="#TOC"
  >Laziness</a
  ></h3
><h3 id="calling-foreign-languages"
><a href="#TOC"
  >Calling foreign languages</a
  ></h3
><h3 id="setting-up-the-environment"
><a href="#TOC"
  >Setting up the environment</a
  ></h3
><h3 id="replacing-the-syntax"
><a href="#TOC"
  >Replacing the syntax</a
  ></h3
><h3 id="real-time"
><a href="#TOC"
  >Real-time</a
  ></h3
><h3 id="networking"
><a href="#TOC"
  >Networking</a
  ></h3
><h2 id="reference"
><a href="#TOC"
  >6. Reference</a
  ></h2
><h3 id="dictionary"
><a href="#TOC"
  >Dictionary</a
  ></h3
><dl
><dt
  >Value</dt
  ><dd
  >a</dd
  ><dt
  >Token</dt
  ><dd
  >a</dd
  ><dt
  >Expression</dt
  ><dd
  >a</dd
  ><dt
  >Evaluation</dt
  ><dd
  >a</dd
  ><dt
  >Type</dt
  ><dd
  >a</dd
  ><dt
  >Function</dt
  ><dd
  >a</dd
  ><dt
  >Predicate</dt
  ><dd
  >a</dd
  ><dt
  >Sequence</dt
  ><dd
  >a</dd
  ></dl
><div class="footnotes"
><hr
   /><ol
  ><li id="fn1"
    ><p
      >For good introduction to functional programming concepts, see <em
	><a href="http://mitpress.mit.edu/sicp/"
	  >Structure and Interpretation of Computer Programs</a
	  ></em
	> by Abelson and Sussman <a href="#fnref1" class="footnoteBackLink" title="Jump back to footnote 1">↩</a></p
      ></li
    ><li id="fn2"
    ><p
      >The is arrow-like sign not part of the language, but just a conventional way of wrinting what an expression evaluates to <a href="#fnref2" class="footnoteBackLink" title="Jump back to footnote 2">↩</a></p
      ></li
    ></ol
  ></div
>
    </div><!-- content -->

  </body>
  
</html>
